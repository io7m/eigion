{
  "$id": "https://www.io7m.com/eigion/products-1.json",
  "$schema": "https://json-schema.org/draft/2020-12/schema",

  "$defs": {
    "Products": {
      "type": "object",
      "properties": {
        "%id": {
          "type": "string",
          "const": "https://www.io7m.com/eigion/products-1.json"
        },
        "Products": {
          "type": "array",
          "items": {
            "$ref": "#/$defs/Product"
          }
        }
      },
      "additionalProperties": false,
      "required": [
        "%id",
        "Products"
      ]
    },

    "Product": {
      "type": "object",
      "additionalProperties": false,
      "properties": {
        "ID": {
          "$ref": "#/$defs/ProductID"
        },
        "Categories": {
          "type": "array",
          "items": {
            "$ref": "#/$defs/Category"
          }
        },
        "Releases": {
          "type": "array",
          "items": {
            "$ref": "#/$defs/Release"
          }
        }
      },
      "required": [
        "ID",
        "Categories"
      ]
    },

    "Category": {
      "type": "string",
      "pattern": "[A-Z][a-zA-Z0-9 ]{0,64}"
    },

    "Hash": {
      "type": "object",
      "additionalProperties": false,
      "properties": {
        "Algorithm": {
          "type": "string"
        },
        "Value": {
          "type": "string",
          "pattern": "[A-F0-9]{1,256}"
        }
      },
      "required": [
        "Algorithm",
        "Value"
      ]
    },

    "Release": {
      "type": "object",
      "additionalProperties": false,
      "properties": {
        "Version": {
          "$ref": "#/$defs/ProductVersion"
        },
        "ProductDependencies": {
          "type": "array",
          "items": {
            "$ref": "#/$defs/ProductDependency"
          }
        },
        "BundleDependencies": {
          "type": "array",
          "items": {
            "$ref": "#/$defs/BundleDependency"
          }
        }
      },
      "required": [
        "Version",
        "ProductDependencies",
        "BundleDependencies"
      ]
    },

    "BundleDependency": {
      "type": "object",
      "additionalProperties": false,
      "properties": {
        "ID": {
          "$ref": "#/$defs/ProductID"
        },
        "Version": {
          "$ref": "#/$defs/ProductVersion"
        },
        "Hash": {
          "$ref": "#/$defs/Hash"
        }
      },
      "required": [
        "ID",
        "Version",
        "Hash"
      ]
    },

    "ProductDependency": {
      "type": "object",
      "additionalProperties": false,
      "properties": {
        "ID": {
          "$ref": "#/$defs/ProductID"
        },
        "Version": {
          "$ref": "#/$defs/ProductVersion"
        }
      },
      "required": [
        "ID",
        "Version"
      ]
    },

    "ProductVersion": {
      "type": "string",
      "pattern": "[0-9]+\\.[0-9]+\\.[0-9]+(-[a-zA-Z0-9]+)?"
    },

    "ProductID": {
      "type": "object",
      "additionalProperties": false,
      "properties": {
        "Group": {
          "type": "string",
          "pattern": "([a-zA-Z][a-zA-Z0-9_-]{0,64})(\\.[a-zA-Z][a-zA-Z0-9_-]{0,64}){0,8}"
        },
        "Name": {
          "type": "string",
          "pattern": "([a-zA-Z][a-zA-Z0-9_-]{0,64})(\\.[a-zA-Z][a-zA-Z0-9_-]{0,64}){0,8}"
        }
      },
      "required": [
        "Group",
        "Name"
      ]
    }
  },
  "$ref": "#/$defs/Products"
}